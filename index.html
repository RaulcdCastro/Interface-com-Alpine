<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alpine.js</title>
  <script src="js/formulario.js" defer></script>
  <script src="js/alpine.min.js" defer></script>
  <link rel="stylesheet" href="style.css" />
  <style>
    .modo-escuro {
      background-color: #111;
      color: #f5f5f5;
    }

    .modo-escuro input,
    .modo-escuro textarea {
      background-color: #222;
      color: #f5f5f5;
      border: 1px solid #555;
    }

    .modo-escuro .botao-escuro {
      background-color: #444;
      color: #fff;
    }

    .botao-escuro {
      position: absolute;
      top: 1rem;
      right: 1rem;
      padding: 0.4rem 0.8rem;
      background-color: #ccc;
      color: #000;
      border-radius: 0.3rem;
      border: none;
      cursor: pointer;
    }

    .cabecalho {
      background-color: #7dd3fc;
      padding: 2rem 1rem;
      text-align: center;
      border-radius: 0.3rem;
      margin-top: 3rem;
    }

    .cabecalho h1 {
      margin: 0;
      font-size: 2rem;
      color: #1f2937;
    }

    .navegacao {
      margin-top: 1rem;
    }

    .link-nav {
      display: inline-block;
      margin: 0 0.5rem;
      padding: 0.5rem 1rem;
      background-color: #3498db;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      transition: background-color 0.3s ease;
      font-weight: bold;
    }

    .link-nav:hover {
      background-color: #2980b9;
    }
  </style>
</head>

<body x-data="tema()" x-init="init()" :class="{ 'modo-escuro': modoEscuro }">

  <button @click="alternar()" class="botao-escuro">
    <span x-text="modoEscuro ? '‚òÄÔ∏è Claro' : 'üåô Escuro'"></span>
  </button>

  <!-- Novo Cabe√ßalho SPA -->
  <header class="cabecalho">
    <h1>Alpine.js</h1>
    <nav class="navegacao">
     <a href="#/" class="link-nav">üè† Home</a>
    <a href="#/sobre" class="link-nav">‚ÑπÔ∏è Sobre</a>
    <a href="#/usuarios" class="link-nav">üë• Usu√°rios</a>

    </nav>
  </header>

  <div class="container" x-data="roteador()" x-init="verificarRota()">
    
    <!-- P√°gina Home -->
    <div x-show="rotaAtual === 'home'" x-cloak>
      <section class="bloco-info">
        <h2>Sobre o projeto</h2>
        <p>Exemplo simples de como usar Alpine.js para criar uma interface interativa com HTML e valida√ß√£o de e-mail real.</p>
      </section>

      <div x-show="sucesso" x-transition x-cloak class="alerta-sucesso">
        ‚úÖ Formul√°rio enviado com sucesso!
      </div>

      <div x-show="erro" x-transition x-cloak class="alerta-erro">
        ‚ùå Email inv√°lido ou inexistente.
      </div>

      <form x-data="formulario()" @submit.prevent>
        <label for="nome">Nome:</label>
        <input type="text" id="nome" x-model="nome" placeholder="Digite seu nome" />

        <label for="email">Email:</label>
        <input type="email" id="email" x-model="email" :class="emailInvalido ? 'input-erro' : ''" placeholder="Digite seu email" />

        <button type="button" @click="enviarFormulario" :disabled="carregando" class="botao-enviar">
          <span x-show="!carregando">Enviar</span>
          <span x-show="carregando">Verificando...</span>
        </button>
      </form>
    </div>

    <!-- P√°gina Sobre -->
    <div x-show="rotaAtual === 'sobre'" x-cloak>
      <header>
        <h1>Sobre</h1>
      </header>
      <section class="bloco-info">
        <h2>Informa√ß√µes</h2>
        <p>Este √© um exemplo de navega√ß√£o SPA usando Alpine.js. Tudo funciona sem recarregar a p√°gina.</p>
      </section>
    </div>

<!-- P√°gina Usu√°rios -->
<div x-show="rotaAtual === 'usuarios'" x-data="usuarios()" x-init="carregarUsuarios()" x-cloak>
  <header>
    <h1>Usu√°rios</h1>
  </header>

  <section class="bloco-info">
    <template x-if="carregando">
      <p>üîÑ Carregando usu√°rios...</p>
    </template>

    <template x-if="!carregando && lista.length > 0">
      <div>
        <ul>
          <template x-for="usuario in lista" :key="usuario.id">
            <li>
              <strong x-text="usuario.name"></strong><br />
              <span x-text="usuario.email"></span>
              <hr />
            </li>
          </template>
        </ul>

        <!-- Bot√£o para carregar pr√≥ximos usu√°rios -->
        <button @click="proximaPagina" class="botao-enviar" style="margin-top: 10px;">
          Pr√≥ximos usu√°rios
        </button>
      </div>
    </template>

    <template x-if="!carregando && lista.length === 0">
      <p>‚ùå Nenhum usu√°rio encontrado.</p>
    </template>
  </section>
</div>

  </div>

<script>
  function tema() {
    return {
      modoEscuro: false,
      init() {
        this.modoEscuro = JSON.parse(localStorage.getItem('modoEscuro')) || false;
      },
      alternar() {
        this.modoEscuro = !this.modoEscuro;
        localStorage.setItem('modoEscuro', this.modoEscuro);
      }
    }
  }

  function roteador() {
    return {
      rotaAtual: 'home',
      sucesso: false,
      erro: false,
      verificarRota() {
        const hash = window.location.hash || '#/';
        this.definirRota(hash);

        window.addEventListener('hashchange', () => {
          const novaHash = window.location.hash || '#/';
          this.definirRota(novaHash);
        });
      },
      definirRota(hash) {
        if (hash === '#/sobre') {
          this.rotaAtual = 'sobre';
        } else if (hash === '#/usuarios') {
          this.rotaAtual = 'usuarios';
        } else {
          this.rotaAtual = 'home';
        }
      }
    }
  }

  function usuarios() {
  return {
    lista: [],
    carregando: true,
    pagina: 0,
    limite: 10,
    async carregarUsuarios() {
      this.carregando = true;
      try {
        const inicio = this.pagina * this.limite;
        const resposta = await fetch(`https://jsonplaceholder.typicode.com/users?_start=${inicio}&_limit=${this.limite}`);
        const dados = await resposta.json();
        this.lista = dados;
      } catch (erro) {
        console.error('Erro ao buscar usu√°rios:', erro);
        this.lista = [];
      } finally {
        this.carregando = false;
      }
    },
    proximaPagina() {
      this.pagina++;
      this.carregarUsuarios();
    }
  }
}
</script>


</body>
</html>
